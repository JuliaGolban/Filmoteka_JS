{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-f9b668c808fa9b50.js","src/js/api-common.js","node_modules/@parcel/runtime-js/lib/runtime-780b6063f0b69511.js","src/js/pagination.js","node_modules/@parcel/runtime-js/lib/runtime-2020e73f68176a09.js","src/js/trending.js","src/js/headerSearch.js","src/js/sortGenres.js","src/js/theme.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"5ZPII\\\":\\\"index.e95cad1d.js\\\",\\\"6rWO1\\\":\\\"sprite.9f0a7f1f.svg\\\",\\\"eXHd7\\\":\\\"cinemaCamera.7e0a12c0.gif\\\",\\\"b9auz\\\":\\\"index.20b37f62.js\\\"}\"));","import axios from 'axios';\nimport { default as pagination } from '../js/pagination';\nimport { getFromStorage, saveToStorage } from './localeCommon';\nimport { renderMarkupMovieCard, removeMarkupMovieCard } from './movie-card';\nimport img from '../image/cinemaCamera.gif';\n\n/**\n * Create pagination\n * @param {Number} currentPage - current page for search\n * @param {Number} totalPages  - all pages for search\n */\n\nconst API_KEY = 'e32c2b640d0c14cb8349bc85f9ee8b0e';\nlet totalPages = 0;\n\ndocument\n  .querySelector('body')\n  .insertAdjacentHTML(\n    'afterbegin',\n    `<img src=\"${img}\" alt=\"Spinner\" width=\"50\" class=\"spinner is-hidden\" />`\n  );\nconst spinner = document.querySelector('.spinner');\n\nconst notFound = document.querySelector('#p-not');\n\nasync function getResponse(currentPage, partUrl) {\n  spinner.classList.remove('is-hidden');\n\n  const axiosInstance = axios.create({\n    baseURL: `https://api.themoviedb.org/3/${partUrl}`,\n    headers: { 'Content-Type': 'application/json' },\n    params: {\n      api_key: API_KEY,\n      page: `${currentPage}`,\n    },\n  });\n\n  const { data } = await axiosInstance.get();\n\n  totalPages = `${data.total_pages}`;\n\n  if (!data.total_results) {\n    spinner.classList.add('is-hidden');\n    return notFound.classList.remove('is-hidden');\n  } else {\n    pagination(totalPages, currentPage);\n  }\n\n  removeMarkupMovieCard();\n  saveToStorage('movies', data);\n  getFromStorage('movies');\n  renderMarkupMovieCard(data);\n\n  notFound.classList.add('is-hidden');\n  spinner.classList.add('is-hidden');\n}\n\nexport { getResponse };\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"6rWO1\")).toString();","import { getResponse } from './api-common';\nimport sprite from '../image/sprite.svg';\n\ndocument\n  .querySelector('main')\n  .insertAdjacentHTML(\n    'beforeend',\n    '<ul id=\"pag-container\" class=\"pagination list\"></ul>'\n  );\n\nconst paginationBox = document.querySelector('.pagination');\n\nlet globalCurrentPage = 0;\n\n/**\n * Create pagination\n * @param {Number} currentPage - current page for search\n * @param {Number} globalCurrentPage - current page for click search\n * @param {Number} totalPages  - all pages for search\n */\nexport default function pagination(totalPages, currentPage) {\n  let markup = '';\n  let beforeTwoPage = currentPage - 2;\n  let beforePage = currentPage - 1;\n  let afterPage = currentPage + 1;\n  let afterTwoPage = currentPage + 2;\n  globalCurrentPage = currentPage;\n\n  if (window.innerWidth > 320 && window.innerWidth < 767.98) {\n    if (currentPage > 1) {\n      markup += `<li class=\"pagination__left pagination__elem\"><svg id=\"svg__left\" class=\"icon__arrow icon__arrow--left\" width=\"10px\" height=\"10px\"><use id=\"use__left\" href=\"${sprite}#arrow-pag\"></use></svg></li>`;\n    }\n    if (currentPage > 2) {\n      markup += `<li class=\"pagination__elem pagination__elem--page\">${beforeTwoPage}</li>`;\n    }\n    if (currentPage > 1) {\n      markup += `<li class=\"pagination__elem pagination__elem--page\">${beforePage}</li>`;\n    }\n    markup += `<li class=\"pagination__currentPage pagination__elem\"><b>${currentPage}</b></li>`;\n    if (totalPages > currentPage) {\n      markup += `<li class=\"pagination__elem pagination__elem--page\">${afterPage}</li>`;\n    }\n    if (totalPages - 1 > currentPage) {\n      markup += `<li class=\"pagination__elem pagination__elem--page\">${afterTwoPage}</li>`;\n    }\n    if (totalPages > currentPage) {\n      markup += `<li class=\"pagination__right pagination__elem\"><svg id=\"svg__right\" class=\"icon__arrow icon__arrow--right\" width=\"10px\" height=\"10px\"><use id=\"use__right\" href=\"${sprite}#arrow-pag\"></use></svg><li>`;\n    }\n  } else {\n    if (currentPage > 1) {\n      markup += `<li class=\"pagination__left pagination__elem\"><svg id=\"svg__left\" class=\"icon__arrow icon__arrow--left\" width=\"10px\" height=\"10px\"><use id=\"use__left\" class=\"use\" href=\"${sprite}#arrow-pag\"></use></svg></li>`;\n    }\n    if (currentPage > 1) {\n      markup += `<li class=\"pagination__elem pagination__elem--page pagination__elem--cutPage\">1</li>`;\n    }\n    if (currentPage > 4) {\n      markup += `<li class=\"pagination__elem pagination__elem--dots\">...</li>`;\n    }\n    if (currentPage > 3) {\n      markup += `<li class=\"pagination__elem pagination__elem--page\">${beforeTwoPage}</li>`;\n    }\n    if (currentPage > 2) {\n      markup += `<li class=\"pagination__elem pagination__elem--page\">${beforePage}</li>`;\n    }\n    markup += `<li class=\"pagination__currentPage pagination__elem\"><b>${currentPage}</b></li>`;\n    if (totalPages - 1 > currentPage) {\n      markup += `<li class=\"pagination__elem pagination__elem--page\">${afterPage}</li>`;\n    }\n    if (totalPages - 2 > currentPage) {\n      markup += `<li class=\"pagination__elem pagination__elem--page\">${afterTwoPage}</li>`;\n    }\n    if (totalPages - 3 > currentPage) {\n      markup += `<li class=\"pagination__elem pagination__elem--dots\">...</li>`;\n    }\n    if (totalPages > currentPage) {\n      markup += `<li class=\"pagination__elem pagination__elem--page pagination__elem--cutPage\">${totalPages}</li>`;\n      markup += `<li class=\"pagination__right pagination__elem\"><svg id=\"svg__right\" class=\"icon__arrow icon__arrow--right\" width=\"10px\" height=\"10px\"><use id=\"use__right\" href=\"${sprite}#arrow-pag\"></use></svg><li>`;\n    }\n  }\n\n  paginationBox.innerHTML = markup;\n}\n\npaginationBox.addEventListener('click', onPaginationBoxClick);\n\nfunction onPaginationBoxClick(evt) {\n  let partUrl = localStorage.getItem('paramsPart');\n\n  if (evt.target.nodeName !== 'LI') {\n    if (evt.target.nodeName !== 'svg') {\n      if (evt.target.nodeName !== 'use') {\n        return;\n      }\n    }\n  }\n  if (\n    evt.target.className === 'pagination__left pagination__elem' ||\n    evt.target.id === 'svg__left' ||\n    evt.target.id === 'use__left'\n  ) {\n    getResponse((globalCurrentPage -= 1), partUrl);\n    return;\n  }\n  if (\n    evt.target.className === 'pagination__right pagination__elem' ||\n    evt.target.id === 'svg__right' ||\n    evt.target.id === 'use__right'\n  ) {\n    getResponse((globalCurrentPage += 1), partUrl);\n    return;\n  }\n  if (evt.target.textContent === '...') {\n    return;\n  }\n  const page = Number(evt.target.textContent);\n  getResponse(page, partUrl);\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"eXHd7\")).toString();","import { getResponse } from './api-common';\nimport { clearData } from './localeCommon';\nlet partUrl = '';\n\n/**\n * Create pagination\n * @param {Number} currentPage - current page for search\n * @param {Number} totalPages  - all pages for search\n */\n\n// clearData();\n\ntrending();\n\nfunction trending() {\n  let currentPage = 1;\n\n  localStorage.setItem('paramsPart', 'trending/movie/week');\n\n  partUrl = localStorage.getItem('paramsPart');\n\n  getResponse(currentPage, partUrl);\n}\n","import { getResponse } from './api-common';\nimport { removeItem } from './localeCommon';\n\n/**\n * Create pagination\n * @param {Number} currentPage - current page for search\n * @param {Number} totalPages  - all pages for search\n */\n\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('.search-form__input');\n\nfunction onSubmitForm(event) {\n  event.preventDefault();\n  removeItem('movies');\n\n  const searchInput = input.value;\n  localStorage.setItem('paramsPart', `search/movie?query=${searchInput}`);\n\n  search();\n  form.reset();\n}\n\nfunction search() {\n  let currentPage = 1;\n\n  let partUrl = localStorage.getItem('paramsPart');\n\n  getResponse(currentPage, partUrl);\n}\n\nform.addEventListener('submit', onSubmitForm);\n","import { getResponse } from './api-common';\nimport getRefs from './getRefs';\nimport {removeItem} from './localeCommon';\n\nconst refs = getRefs();\n\nrefs.btn.addEventListener('click', onClickMenu)\nfunction onClickMenu() {\n  refs.firstLine.classList.toggle('genres-nav-button__line--1');\n  refs.secondLine.classList.toggle('genres-nav-button__line--2');\n  refs.thirdLine.classList.toggle('genres-nav-button__line--3');\n  refs.menu.classList.toggle('mobile-menu--open');\n  renderGenres(getFromStorageGenre())\n}\n\nfunction renderGenres(results) {\n  refs.menuList.innerHTML = '';\n  const markup = results.map(({name,id}) =>{\n      return `<li class=\"mobile-menu-item\"><a class='mobile-menu-link' data-action=\"${id}\">${name}</a></li>`\n  }).join('');\n  refs.menuList.insertAdjacentHTML('beforeend', markup)\n}\n\nlet storageKey = 'genres';\nfunction getFromStorageGenre() {\n  try {\n    const data = JSON.parse(localStorage.getItem(storageKey));\n    return data;\n} catch (err) {\n    console.warn('Cannot parse JSON from localStorage');\n    return null;\n}\n}\n\n\nrefs.menuList.addEventListener('click', sortByGenre)\n\n\n\nfunction sortByGenre(event) {\n    if (event.target.nodeName !== \"A\") {\n      return;\n    }\n  removeItem('movies');\n  const link = document.querySelectorAll('.mobile-menu-link');\n  const value = event.target.dataset.action;\n  for(let i =0; i<link.length; i+=1) {\n    if(value===link[i].dataset.action) {\n      link[i].classList.add('active')\n    }\n    else{\n      link[i].classList.remove('active')\n    }\n  }\n  \n  localStorage.setItem('paramsPart', `discover/movie?sort_by=popularity.desc&with_genres=${value}`)\n  sort();\n}\n\nfunction sort() {\n   let currentPage = 1;\n   partUrl = localStorage.getItem('paramsPart');\n   getResponse(currentPage, partUrl)\n}","function theme(){\n    const toggleTheme = document.querySelector('#toggle-theme-btn');\n    // const sun = document.querySelector()\n    if(localStorage.getItem('theme') !== null){\n        document.documentElement.setAttribute('data-theme', 'dark')\n    }\n    toggleTheme.addEventListener('click', () => {\n\n        if(document.documentElement.hasAttribute('data-theme')){\n            document.documentElement.removeAttribute('data-theme')\n            localStorage.removeItem('theme')\n        }\n        else{\n            document.documentElement.setAttribute('data-theme', 'dark')\n            localStorage.setItem('theme', 'dark')\n        }\n \n    })\n \n\n}\n\ntheme();"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$2shzp","$c6e92b56a514c372$exports","URL","resolve","import","meta","url","toString","document","querySelector","insertAdjacentHTML","$1bab9c519cfa82bc$var$paginationBox","$1bab9c519cfa82bc$var$globalCurrentPage","$1bab9c519cfa82bc$export$2e2bcd8739ae039","totalPages","currentPage","markup","beforeTwoPage","beforePage","afterPage","afterTwoPage","window","innerWidth","$parcel$interopDefault","innerHTML","addEventListener","evt","partUrl","localStorage","getItem","target","nodeName","className","$5e15f543ce78bc7a$export$fd3c80c00b3490e","textContent","Number","$f771494643d30ffe$exports","$5e15f543ce78bc7a$var$totalPages","$5e15f543ce78bc7a$var$spinner","$5e15f543ce78bc7a$var$notFound","async","classList","remove","axiosInstance","default","create","baseURL","headers","params","api_key","page","data","get","total_pages","total_results","add","$03v4M","removeMarkupMovieCard","$cChFX","saveToStorage","getFromStorage","renderMarkupMovieCard","$99d4ed9283af68e7$var$partUrl","setItem","$ac39f9e0489fa0bc$var$form","$ac39f9e0489fa0bc$var$input","event","preventDefault","removeItem","searchInput","value","$ac39f9e0489fa0bc$var$search","reset","$b0e017c3ccbe0fe7$var$refs","$1DTXP","btn","firstLine","toggle","secondLine","thirdLine","menu","results","menuList","map","name","join","$b0e017c3ccbe0fe7$var$renderGenres","err","console","warn","$b0e017c3ccbe0fe7$var$getFromStorageGenre","link","querySelectorAll","dataset","action","$b0e017c3ccbe0fe7$var$sort","toggleTheme","documentElement","setAttribute","hasAttribute","removeAttribute","$38bc8b2c82e947f6$var$theme"],"version":3,"file":"index.e95cad1d.js.map"}